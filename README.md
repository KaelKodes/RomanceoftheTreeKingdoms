# Romance of Tree Kingdoms

**Romance of Tree Kingdoms** is a grand strategy role-playing game inspired by the classic *Romance of the Three Kingdoms* series, built with **Godot 4 (C#)** and **SQLite**.

The game blends personal RPG elements (playing as an individual officer) with grand strategy mechanics (managing cities, leading armies, and conquering the map).

## Current Features

### üåç Interactive World Map
The world map is the central hub for gameplay and has been significantly enhanced for usability and scale:
*   **Dynamic City Nodes**: Cities display ownership, faction colors, and battle status (swords icon for contested areas).
*   **Scale & Navigation**:
    *   **Auto-Fit Scaling**: Map elements resize dynamically to fit different screen resolutions.
    *   **Centroid Zoom**: Mouse wheel scaling expands/contracts the map from the center of the city cluster, preventing layout distortion.
    *   **Global Drag**: Hold `Left + Right Click` to pan the entire map cluster freely.
*   **Route System**: Visual connections between cities showing available travel paths and distance costs.

### üë§ Officer System
Officers are the lifeblood of the game, each with unique stats and personalities:
*   **RPG Statistics**:
    *   **Attributes**: Leadership (Troop Stats), War (Duel/Damage), Intelligence (Strategy), Politics (Domestic), Charisma (Diplomacy).
    *   **Skills & Traits**: Unique abilities that define an officer's role (e.g., "Commerce" for better tax yields, "Valor" for combat).
*   **Relationships**:
    *   **Affinity System**: Hidden compatibility scores between officers.
    *   **Bond Levels**: Dynamic relationships that evolve through interactions (Gifts, Banquets, Joint Tasks).
*   **Portraits**: Custom portrait system supporting atlas-based rendering and dynamic assignment based on officer names.

### ‚öîÔ∏è Gameplay Loop & AI
The game operates on a turn-based system with distinct phases:
*   **Ronin Phase**: Play as an unaligned officer. Travel the world, build relationships, train stats, and eventually join a force or raise your own flag.
*   **Faction Phase**: As a ruler or governor, manage your territory:
    *   **Domestic**: Develop Agriculture, Commerce, and Technology.
    *   **Military**: Recruit troops, train officers, and reorganize units.
    *   **Diplomacy**: Form alliances or demand tribute.
*   **AI Commanders**:
    *   **Aggressive Conquest**: AI factions actively plan expansion, identifying weak targets and chokepoints.
    *   **Resource Management**: AI manages gold/food budgets, ensuring they don't bankrupt themselves while maintaining armies.
    *   **Battle Logic**: AI generals intelligently deploy units, use strategies, and reinforce contested cities.

### üí∞ Economy & Cities
*   **Resource Management**: Gold (Weekly income), Food (Seasonal harvests), and Population reservists.
*   **City Development**: Upgrade city stats to support larger armies and better income.
*   **Migration**: Population shifts based on city stability and war.

### üõ† Technical Stack
*   **Engine**: Godot 4.5 (.NET/C#)
*   **Database**: SQLite (local `tree_kingdoms.db`) for all game data, saves, and static definitions.
*   **Data Tools**: Python scripts for seeding data, migrations, and validating schema integrity.

---
*Generated by Antigravity*
